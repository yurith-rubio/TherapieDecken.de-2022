/*-----------------------------------------------------------------------------/
/ Hide ex - Yurith
/-----------------------------------------------------------------------------*/
console.log("product json");
const producJson = window.product;
const productVariants = producJson.variants;
const valueFirstSelected = document.querySelector(".SizeSwatch__Radio[checked=checked]").value;
const weightSizes = document.querySelectorAll(".gewicht_option .SizeSwatch__Radio").getAttribute("value");
console.log(weightSizes);

const variantWeightOptions = productVariants.map(variant => {
  console.log(variant.option2);
});

productVariants.forEach(variant => {
  var option1 = variant.option1;
  var option2 = variant.option2;
  var option3 = variant.option3;

});

const collapsibleSelectors = document.querySelectorAll(".ProductForm_CollapsibleSelector");
const collapsibleContent = document.querySelectorAll(".ProductForm__Option");

function hideShowCollapsibles(event) {
  collapsibleSelectors.forEach(collapsible => {
    collapsible.classList.remove("hidden");
  });
  collapsibleContent.forEach(collapsible => {
    collapsible.classList.add("hidden");
  });
}

function getCollapsbleOptionNumber(element) {
  return element.firstElementChild.firstElementChild.getAttribute("data-option-position");
}

collapsibleSelectors.forEach(button => {
  button.addEventListener("click", event => {
    const buttonSelected = event.target.closest(".ProductForm_CollapsibleSelector");
    const infoToHide = event.target.closest(".ProductForm_CollapsibleSelector");
    const infoToShow = buttonSelected.nextElementSibling;
    console.log("event");
    console.log(event);
    hideShowCollapsibles();
    infoToHide.classList.add("hidden");
    infoToShow.classList.remove("hidden");
  });
});

$("li.HorizontalList__Item > input").click(function (event) {
  const value = event.currentTarget.defaultValue;
  hideNonExistingValues(value);
  
  const label = event.currentTarget.closest(".ProductForm_CollapsibleOption").firstElementChild.firstElementChild.firstElementChild;
  label.innerText = value;
  
});

function hideNonExistingValues(value){
  const valueOneThirty = "135 x 200 cm";
  const valueOneFifty = "150 x 220 cm";
  const valueSixty = "60x100 cm";

  if (value === valueOneThirty) {
    $("li.HorizontalList__Item > input[value = '4 kg']").parent().removeAttr('style');
    $(".gewicht_option > input").first().click();
  } else if(value === valueOneFifty) {
    //currentLabel.innerText = valueOneFifty;
    $("li.HorizontalList__Item > input[value = '4 kg']").parent().css("display", "none");
    $(".gewicht_option > input[value = '6 kg']").click();
  } else if(value === valueSixty){
    //currentLabel.innerText = valueOneFifty;
    $("li.HorizontalList__Item > input[value = '3kg']").parent().css("display", "none");
    $("li.HorizontalList__Item > input[value = '4kg']").parent().css("display", "none");
    $("li.HorizontalList__Item > input[value = '5kg']").parent().css("display", "none");
    $("li.HorizontalList__Item > input[value = '6kg']").parent().css("display", "none");
  }
}
