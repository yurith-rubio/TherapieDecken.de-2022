<script type="application/json" data-ajax-cart-initial-state >
    {{ cart | json }}
</script>

<script type="module">
  import '{{ "liquid-ajax-cart-v1.10.0.js" | asset_url }}';
  import { cartRequestAdd, cartRequestChange, subscribeToCartStateUpdate } from '{{ "liquid-ajax-cart-v1.10.0.js" | asset_url }}';

  subscribeToCartStateUpdate(async state => {
    console.log("cart state update");
    const discounts = await document.querySelectorAll(".MyCart_ItemDiscount");
    if (discounts){
      discounts.forEach(discount => {
        console.log(discount.innerText);
      });
    }
  });
</script>

<script type="application/json" data-ajax-cart-configuration >
    {
      "addToCartCssClass": "js-my-cart-open"
    }
</script>